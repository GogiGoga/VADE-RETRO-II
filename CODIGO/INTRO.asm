INTRO:
;******************************************************************************************************************************************************************************************************************************

;LOS SECRETOS DEL DOCTOR MALFARIO


LD IX,COLOREA_SECRETOS
CALL COLOREANDO_DE_TABLA

CALL PAUSADE100

CALL TODONEGRO	       ;COLOREAMOS SIN BORRAR TODO NEGRO
LD A,71
LD (FONDO),A           ;SI FINALMENTE SOLO 1 FONDO ARREGLAR ESTO QUITANDOLO Y PONIENDO SU VALOR DONDE SEA
CALL CELESEJUEGO



;LOGO LA MODERNA Y INTRO PREVIA ***************************************************************************************************************


LD IX,LOGO_MODERNA
CALL PINTANDO_DE_TABLA

CALL ESPERATECLA
CALL TODONEGRO       	;COLOREA TODA LA PANTALLA A NEGRO, NO ES CELESE POR INTERFACE TAPADO
LD A,4
LD (FONDO),A
CALL CELESEJUEGO
CALL PAUSADE15

     LD B,104
     CAMINOX:
     PUSH BC

     PUSH BC
     LD A,128
     SUB B
     LD C,A
     LD B,96
     LD HL,NAVECHOQUE1
     CALL HR2X2BS
     POP BC

     LD A,128
     ADD A,B
     LD C,A
     LD B,96
     LD HL,NAVECHOQUE2
     CALL HR2X2BS

     LD B,5
     CALL FLATO

     POP BC
     DJNZ CAMINOX


     LD BC,2063
     LD DE,ZX_SPECTRUM
     LD A,255
     CALL DIBUJA
     LD BC,2830
     LD DE,CUMPLEANOS
     LD A,255
     CALL DIBUJA
     
     LD IX,CACHO1
     CALL PLAYCACHO

CALL PAUSADE100
CALL CELESEJUEGO


CALL BLASADA
CALL CELESEBLOQUES
CALL BLASADA
CALL CELESEBLOQUES
CALL BLASADA

JP MENUS_INICIO





;*****************************************************


JORKEANDO:
LD HL,32
LD (JORCAS),HL
CALL PINTATODO
RET

JORKEANDO2:
XOR A
LD (JOKER),A
LD HL,0
LD (JORCAS),HL
CALL PINTATODO
RET

PINTATODO:

LD DE,(JORCAS)
LD HL,ANT_MUCHACHA
ADD HL,DE
LD BC,30840           ;120,120
LD A,4
CALL HR2X2B

LD DE,(JORCAS)
LD HL,ANT_MUCHACHO
ADD HL,DE
LD BC,34952           ;136,136
LD A,4
CALL HR2X2B

LD DE,(JORCAS)
LD HL,ANT_ARANA
ADD HL,DE
LD BC,22616           ;88,88
LD A,4
CALL HR2X2B

RET


CELESEBLOQUES:
LD BC,3078
LD DE,VACIO2X2
XOR A
CALL DIBUJA
LD BC,2062
LD DE,VACIO2X2
XOR A
CALL DIBUJA
RET




BLOQUE:
DEFB 136,184,168,120
DEFB 136,184,168,120



BLASADA:
LD HL,BLOQUE+4
LD DE,BLOQUE+0
LD BC,4
LDIR
LD IX,BLOQUE

XOR A
LD (JOKER),A
LD (GUDAR),A


FASEONE:

LD A,(JOKER)
INC A
LD (JOKER),A

HALT
;HALT

CP 5
CALL Z,JORKEANDO
CP 10
CALL Z,JORKEANDO2

LD A,(GUDAR)
INC A
LD (GUDAR),A
CP 1
JR NZ,FASEONE

XOR A
LD (GUDAR),A

LD HL,ANT_BLOQUE
LD B,(IX+0)
LD C,(IX+1)
LD A,4
CALL HR2X2B

LD HL,ANT_BLOQUE
LD B,(IX+2)
LD C,(IX+3)
LD A,4
CALL HR2X2B

DEC (IX+0)
LD A,(IX+0)
CP 64
RET Z
DEC (IX+1)
DEC (IX+2)
DEC (IX+3)
;LD A,8
;SUB (IX+0)
;LD (IX+0),A
;CP 56
;RET Z
;LD A,8
;SUB (IX+1)
;LD (IX+1),A
;LD A,8
;SUB (IX+2)
;LD (IX+2),A
;LD A,8
;SUB (IX+3)
;LD (IX+3),A

JP FASEONE
