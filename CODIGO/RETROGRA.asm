;RETROGRADO

;JBGV 2017



ORG 26000     ;ACUERDATE DE LOAD "" CODE 26000 Y LUEGO RAND USR 32768


;32768-26000=6768
;6768-592=6176
;   -6600 PARA VER LO QUE REALMENTE OCUPO



;-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/
;-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/

;VALORES INICIALES DE PERSONAJES Y VEHICULOS    OJO PSA LOS DEFW A DEFB MIENTRAS ESTEN VACIOS

VALORES_INICIALES_PERSONAJES:					;37 CADA UNO

             ;ACTIVO
              ;12                                        5
DEFB   156,160,12,5,2,0,8,0,1,0,0,20,10,71,240,176,0,100,2
DEFW GUENO_MALFARIO+64
DEFW GUENO_MALFARIO+0
DEFW GUENO_MALFARIO+16
DEFW GUENO_MALFARIO+32
DEFW GUENO_MALFARIO+48
DEFW ATTR1X1_Q
DEFW ATTR1X1_A
DEFW ATTR1X1_P
DEFW ATTR1X1_O
              ;MALFARIO
	      ;12                                        5
DEFB   156,160,12,5,2,0,8,0,1,0,0,20,10,71,240,176,0,100,2
DEFW GUENO_MALFARIO+64
DEFW GUENO_MALFARIO+0
DEFW GUENO_MALFARIO+16
DEFW GUENO_MALFARIO+32   
DEFW GUENO_MALFARIO+48
DEFW ATTR1X1_Q   
DEFW ATTR1X1_A
DEFW ATTR1X1_P   
DEFW ATTR1X1_O
              ;FMANAGER
	      ;60                                          5
DEFB   136,128,60,5,2,1,8,0,2,0,0,20,10,71,240,176,0,100,2
DEFW GUENO_FMANAGER+64
DEFW GUENO_FMANAGER+0
DEFW GUENO_FMANAGER+16   
DEFW GUENO_FMANAGER+32   
DEFW GUENO_FMANAGER+48  
DEFW ATTR1X1_Q   
DEFW ATTR1X1_A   
DEFW ATTR1X1_P   
DEFW ATTR1X1_O
              ;COCHE DESIERTO
DEFB   128,152,243,3,4,2,32,0,0,0,1,10,5,71,232,168,8,0,0,0,0
DEFW COCHEN_DESIERTO+0
DEFW ESPRITEABAJO   
DEFW COCHEN_DESIERTO+64
DEFW ESPRITEIZQUIERDA   
DEFW ATTR2X2_Q   
DEFW ATTR2X2_A   
DEFW ATTR2X2_P   
DEFW ATTR2X2_O
              ;ROBOT 2X2

DEFB   136,120,30,2,2,3,32,0,0,0,0,20,10,71,232,168,8,0,0
DEFW GUENO_ROBOT+0
DEFW GUENO_ROBOT+0
DEFW GUENO_ROBOT+128   
DEFW GUENO_ROBOT+64   
DEFW ESPRITEIZQUIERDA   
DEFW ATTR2X2_Q   
DEFW ATTR2X2_A   
DEFW ATTR2X2_P   
DEFW ATTR2X2_O

              ;COCHE MU 1
DEFB   104,136,10,1,4,4,32,0,0,0,1,10,5,71,232,168,8,0,0,0,0
DEFW GUENO_COCHEN+0   
DEFW ESPRITEABAJO   
DEFW GUENO_COCHEN+64   
DEFW ESPRITEIZQUIERDA   
DEFW ATTR2X2_Q   
DEFW ATTR2X2_A   
DEFW ATTR2X2_P   
DEFW ATTR2X2_O
              ;SUBMARINO
DEFB   64,216,125,4,4,5,32,0,1,1,1,10,5,71,232,168,8,0,0,0,0
DEFW GUENO_SUBMARINO
DEFW GUENO_SUBMARINO
DEFW GUENO_SUBMARINO
DEFW GUENO_SUBMARINO
DEFW ATTR2X2_Q   
DEFW ATTR2X2_A   
DEFW ATTR2X2_P
DEFW ATTR2X2_O
              ;COCHE MU 11
DEFB   128,168,92,1,4,6,32,0,0,0,1,10,5,71,232,168,8,0,0,0,0
DEFW GUENO_CORUGAN+0
DEFW ESPRITEABAJO   
DEFW GUENO_CORUGAN+64   
DEFW ESPRITEIZQUIERDA   
DEFW ATTR2X2_Q   
DEFW ATTR2X2_A   
DEFW ATTR2X2_P   
DEFW ATTR2X2_O
               ;BARCO MU 9
DEFB   80,200,78,1,8,7,32,0,0,0,1,10,5,79,232,168,8,0,0,0,0
DEFW GUENO_BARCO+0   
DEFW ESPRITEABAJO   
DEFW GUENO_BARCO+64   
DEFW ESPRITEIZQUIERDA   
DEFW ATTR2X2_Q   
DEFW ATTR2X2_A   
DEFW ATTR2X2_P   
DEFW ATTR2X2_O
              ;TREN OP 126
DEFB   136,72,57,3,8,8,32,0,0,0,1,8,4,7,232,168,8,0,0,0,0
DEFW GUENO_TREN+0
DEFW ESPRITEABAJO   
DEFW GUENO_TREN+64   
DEFW ESPRITEIZQUIERDA
DEFW ATTR2X2_Q  
DEFW ATTR2X2_A   
DEFW ATTR2X2_P   
DEFW ATTR2X2_O
              ;TREN OP 133
DEFB   136,184,28,3,8,9,32,0,0,0,1,8,4,7,232,168,8,0,0,0,0
DEFW GUENO_TREN+0
DEFW ESPRITEABAJO
DEFW GUENO_TREN+64
DEFW ESPRITEIZQUIERDA   
DEFW ATTR2X2_Q   
DEFW ATTR2X2_A   
DEFW ATTR2X2_P   
DEFW ATTR2X2_O
              ;TREN OP 142
DEFB   136,168,16,3,8,10,32,0,0,0,1,8,4,7,232,168,8,0,0,0,0
DEFW GUENO_TREN+0
DEFW GUENO_TREN+0
;DEFW ESPRITEABAJO
DEFW GUENO_TREN+64
DEFW GUENO_TREN+64
;DEFW ESPRITEIZQUIERDA
DEFW ATTR2X2_Q
DEFW ATTR2X2_A   
DEFW ATTR2X2_P
DEFW ATTR2X2_O
              ;TREN OP 151
DEFB   136,168,75,3,8,11,32,0,0,0,1,8,4,7,232,168,8,0,0,0,0
DEFW GUENO_TREN+0
DEFW ESPRITEABAJO   
DEFW GUENO_TREN+64   
DEFW ESPRITEIZQUIERDA   
DEFW ATTR2X2_Q   
DEFW ATTR2X2_A   
DEFW ATTR2X2_P   
DEFW ATTR2X2_O
              ;TREN QA 127
DEFB   120,88,2,1,8,12,32,0,0,0,1,8,4,7,232,168,8,0,0,0,0
DEFW GUENO_TREN+0   
DEFW ESPRITEABAJO   
DEFW GUENO_TREN+64   
DEFW ESPRITEIZQUIERDA   
DEFW ATTR2X2_Q   
DEFW ATTR2X2_A   
DEFW ATTR2X2_P   
DEFW ATTR2X2_O
              ;TREN QA 138
DEFB   120,88,16,1,8,13,32,0,0,0,1,8,4,7,232,168,8,0,0,0,0
DEFW GUENO_TREN+0
DEFW GUENO_TREN+0
;DEFW ESPRITEABAJO
DEFW GUENO_TREN+64
DEFW GUENO_TREN+64
;DEFW ESPRITEIZQUIERDA
DEFW ATTR2X2_Q
DEFW ATTR2X2_A
DEFW ATTR2X2_P
DEFW ATTR2X2_O
              ;TREN QA 146
DEFB   120,88,70,1,8,14,32,0,0,0,1,8,4,7,232,168,8,0,0,0,0
DEFW GUENO_TREN+0
DEFW ESPRITEABAJO   
DEFW GUENO_TREN+64   
DEFW ESPRITEIZQUIERDA   
DEFW ATTR2X2_Q   
DEFW ATTR2X2_A   
DEFW ATTR2X2_P   
DEFW ATTR2X2_O


;-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/
;-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/

;TABLAS MALOTES

TIPOS_ORDAS:            ;DEFINE POR TIPO LA VIDA INICIAL, EL DAÑO DE SU DISPARO Y EL SPRITE
DEFB  150,5,5,0
DEFB  151,15,5,1
DEFB  152,25,15,2
DEFB  153,5,5,3
DEFB  154,15,5,4
DEFB  155,40,15,5
DEFB  156,15,5,6
DEFB  157,40,15,7
DEFB  158,50,15,8
DEFB  159,70,15,9

	

TABLA_INIC_ORDA: ;TABLA PARA INICIAR VALORES DE VIDA AL INICIO DEL JUEGO
DEFB 25,25,0,15,25,15,5,5,5,15,25,25,5,15,5,15,25,15,5,15,40,15,15,40,5,15,40,40,5,15,5,5,5,5,15,25,5,25,5,15,40,15,40,5,15,25,50,50,50,5,5,5,5,5,15,40,15,5
DEFB 15,25,70,15,40,25,15,5,5,15,15,25,15,25,40,5,15,15,5,5,40,25,25,15,5,5,15,25,5,25,5,15,40,15,0,5,15,15,15,70,70,15,40,40,70,15,70,70
;DEFB  30,30

TABLA_ORDAS:;EN ESTA LA VIDA SE CARGARÁ DE TABLA_INIC_ORDA AL PRINCIPIO DEL JUEGO, ES LA QUE SE LEE PARA CARGAR LAS ORDAS DE CADA PANTALLA
DEFB  2,96,136,1,152,25
DEFB  2,120,56,2,152,25
DEFB  3,96,72,3,150,5
DEFB  3,96,152,4,151,15
DEFB  3,144,104,5,152,25
DEFB  5,120,184,6,151,15
DEFB  6,152,56,7,150,5
DEFB  6,104,168,8,150,5
DEFB  8,88,40,9,150,5
DEFB  8,96,136,10,151,15
DEFB  13,112,40,11,152,25
DEFB  13,104,88,12,152,25
DEFB  14,96,88,13,150,5
DEFB  14,104,168,14,151,15
DEFB  15,88,104,15,150,5
DEFB  15,152,120,16,151,15
DEFB  15,120,200,17,152,25
DEFB  19,128,88,18,151,15
DEFB  21,112,40,19,153,5
DEFB  21,88,104,20,154,15
DEFB  21,128,200,21,155,40
DEFB  23,88,120,22,154,15
DEFB  23,144,40,23,154,15
DEFB  23,144,200,24,155,40
DEFB  24,128,104,25,153,5
DEFB  24,112,152,26,154,15
DEFB  25,136,120,27,155,40
DEFB  26,120,104,28,155,40
DEFB  26,152,200,29,153,5
DEFB  27,96,72,30,154,15
DEFB  27,136,136,31,153,5
DEFB  34,120,40,32,150,5
DEFB  36,72,72,33,150,5
DEFB  36,104,120,34,153,5
DEFB  36,112,200,35,151,15
DEFB  38,104,72,36,152,25
DEFB  38,144,120,37,153,5
DEFB  38,112,168,38,152,25
DEFB  39,136,40,39,150,5
DEFB  39,88,120,40,154,15
DEFB  39,88,200,41,155,40
DEFB  41,136,120,42,151,15
DEFB  41,96,152,43,155,40
DEFB  42,96,56,44,153,5
DEFB  42,128,120,45,151,15
DEFB  42,96,152,46,152,25
DEFB  45,88,56,47,158,50
DEFB  45,88,184,48,158,50
DEFB  45,136,200,49,158,50
DEFB  61,136,216,50,150,5
DEFB  63,128,72,51,150,5
DEFB  63,144,56,52,150,5
DEFB  64,80,72,53,153,5
DEFB  64,128,184,54,150,5
DEFB  65,136,88,55,154,15
DEFB  65,150,128,56,155,40
DEFB  66,88,88,57,151,15
DEFB  67,144,56,58,150,5
DEFB  67,104,88,59,154,15
DEFB  67,160,152,60,152,25
DEFB  68,120,104,61,159,70
DEFB  69,152,168,62,154,15
DEFB  70,80,120,63,155,40
DEFB  71,88,88,64,152,25
DEFB  71,88,168,65,154,15
DEFB  72,96,104,66,150,5
DEFB  72,96,168,67,153,5
DEFB  73,96,104,68,154,15
DEFB  73,128,184,69,151,15
DEFB  74,88,56,70,152,25
DEFB  74,152,104,71,154,15
DEFB  74,112,184,72,152,25
DEFB  75,136,120,73,155,40
DEFB  76,160,150,74,150,5
DEFB  77,152,56,75,151,15
DEFB  77,152,150,76,153,15
DEFB  78,152,136,77,150,5
DEFB  78,152,184,78,151,5
DEFB  83,112,136,79,155,40
DEFB  89,104,56,80,152,25
DEFB  89,120,120,81,152,25
DEFB  90,104,152,82,156,15
DEFB  91,136,88,83,156,15
DEFB  91,112,184,84,157,40
DEFB  92,96,88,85,158,50
DEFB  92,144,136,86,156,15
DEFB  94,128,168,87,158,50
DEFB  95,152,40,88,156,15
DEFB  95,88,104,89,157,40
DEFB  95,136,184,90,158,50
DEFB  96,112,72,91,157,40
DEFB  96,80,120,92,157,40
DEFB  96,136,168,93,158,50
DEFB  97,144,72,94,153,5
DEFB  97,120,168,95,154,15
DEFB  98,96,72,96,156,15
DEFB  98,144,120,97,156,15
DEFB  99,152,88,98,159,70
DEFB  99,120,184,99,159,70
DEFB  100,160,56,100,156,15
DEFB  100,136,152,101,157,40
DEFB  101,96,88,102,157,40
DEFB  101,168,120,103,158,40
DEFB  101,144,184,104,156,15
DEFB  114,128,40,105,159,70
DEFB  114,144,150,106,159,70

;DEFB  250, 144,104, 250, 202,30	;ESPECIALES DESIERTO
;DEFB  250, 144,184, 250, 202,30

DEFB  255



;-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/
;-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/

;TABLAS PINTAR USANDO RUTINA "PINTANDO_DE_TABLA"   ESTÁ EN RUTINA II "PINTASTADOS Y RELACIONADAS"

COSAS_VENTANACOLOR:	;TABLA DE OBJETOS EN VENTANA DE CLAVE DE COLOR PANTALLA 93
DEFB 4   		;Nº OBJETOS
DEFB 16,8,255
DEFW OPQAX
DEFB 14,15,255
DEFW CERRADURA2X2
DEFB 17,19,255
DEFW TTRY
DEFB 17,23,255
DEFW EXITX


DIBUJO_MENUPRINCIPAL:
DEFB 5
DEFB 8,3,255
DEFW ADORNO_MENU
DEFB 8,22,255
DEFW ESPEJO		;(*) LO CARGO ANTES DE LLAMAR A "PINTANDO_DE_TABLA"
DEFB 21,2,255
DEFW PULPO_QUI7
DEFB 20,15,255
DEFW START
DEFB 22,26,255
DEFW JB_2017

DIBUJO_MENUAYUDA:
DEFB 13
DEFB 8,3,255
DEFW ADORNO_MENU
DEFB 8,22,255
DEFW ESPEJO		;(*) LO CARGO ANTES DE LLAMAR A "PINTANDO_DE_TABLA"
DEFB 21,2,255
DEFW PULPO_QUI7
DEFB 22,26,255
DEFW JB_2017
DEFB 11,11,255
DEFW MALFARIO_3X3
DEFB 11,18,255
DEFW FMANAFER_3X3
DEFB 15,5,255
DEFW FLECHAOPQA
DEFB 17,14,255
DEFW SUBECOCHE
DEFB 12,15,255
DEFW AYUDA1
DEFB 12,25,255
DEFW AYUDAM
DEFB 15,25,255
DEFW AYUDAN
DEFB 18,25,255
DEFW AYUDAI
DEFB 22,15,255
DEFW EXITX

DIBUJO_MENUKKKKK:
DEFB 5
DEFB 8,3,255
DEFW ADORNO_MENU
DEFB 8,22,255
DEFW ESPEJO		;(*) LO CARGO ANTES DE LLAMAR A "PINTANDO_DE_TABLA"
DEFB 21,2,255
DEFW PULPO_QUI7
DEFB 22,26,255
DEFW JB_2017
DEFB 22,15,255
DEFW EXITX

DIBUJO_MULTIUNIVERSO:
DEFB 10
DEFB 9,3,255
DEFW GALAXIA
DEFB 15,11,69
DEFW GALAXIA
DEFB 10,23,68
DEFW GALAXIA
DEFB 8,13,255
DEFW PLANETA
DEFB 15,27,3
DEFW PLANETA
DEFB 16,5,255
DEFW ESTRELLA
DEFB 9,7,255
DEFW ESTRELLA
DEFB 8,19,255
DEFW ESTRELLA
DEFB 16,17,255
DEFW ESTRELLA
DEFB 9,27,255
DEFW ESTRELLA

DIBUJO_FUNERAL:
DEFB 4
DEFB 12,12,255
DEFW FRED
DEFB 12,14,255
DEFW FRED_FIAMBRE
DEFB 12,17,255
DEFW FRED
DEFB 10,15,255
DEFW CRUZ_MUERTE

DIBUJO_UNIVERSO_VICTORIOSO:
DEFB 10
DEFB 4,9,255
DEFW GALAXIA
DEFB 16,26,69
DEFW GALAXIA
DEFB 15,4,68
DEFW GALAXIA
DEFB 8,3,255
DEFW PLANETA
DEFB 11,19,3
DEFW PLANETA
DEFB 8,19,255
DEFW ESTRELLA
DEFB 12,7,255
DEFW ESTRELLA
DEFB 12,24,255
DEFW ESTRELLA
DEFB 16,16,255
DEFW ESTRELLA
DEFB 21,8,255
DEFW ESTRELLA

DIBUJO_CARAS_INICIO:
DEFB 2
DEFB 2,4,255
DEFW MALFARIO_3X3
DEFB 2,25,0
DEFW FMANAFER_3X3

DIBUJO_DOCTORCITI_MALO:
DEFB 3
DEFB 11,14,255
DEFW MALO_GORDO
DEFB 13,18,255
DEFW OJO_MISTERIOSO
DEFB 8,20,255
DEFW DARK_MONK

ESCRIBIR_MENUPRINCIPAL:
DEFB 3
DEFB 11,20,68
DEFW OTROS_TEXTOS+18           ;"AYUDA"
DEFB 11,7,68
DEFW OTROS_TEXTOS+24           ;"EXTRA"
DEFB 9,13,71
DEFW OTROS_TEXTOS+11           ;"INICIO"


ESCRIBIR_MENUAYUDA:
DEFB 10
DEFB 9,14,69
DEFW OTROS_TEXTOS+18
DEFB 13,6,7
DEFW OTROS_TEXTOS+41
DEFB 19,6,7
DEFW OTROS_TEXTOS+43
DEFB 16,3,7
DEFW OTROS_TEXTOS+45
DEFB 16,9,7
DEFW OTROS_TEXTOS+47
DEFB 14,16,7
DEFW OTROS_TEXTOS+49
DEFB 19,16,7
DEFW OTROS_TEXTOS+51
DEFB 13,28,7
DEFW OTROS_TEXTOS+53
DEFB 16,28,7
DEFW OTROS_TEXTOS+55
DEFB 19,28,7
DEFW OTROS_TEXTOS+57

ESCRIBIR_MENUKKKKK:
DEFB 4
DEFB 9,14,71
DEFW OTROS_TEXTOS+24           ;EXTRA
DEFB 12,10,68
DEFW OTROS_TEXTOS+59           ;FAR CRY
DEFB 14,10,69
DEFW OTROS_TEXTOS+69           ;CALL OF DUTY
DEFB 16,10,70
DEFW OTROS_TEXTOS+84           ;JARL LIFE

ESCRIBIR_FICHAJE:
DEFB 7
DEFB 8,1,39
DEFW INTRO_TEXTOS+368           ;TRANSFER
DEFB 10,1,56
DEFW INTRO_TEXTOS+392           ;YOU VE
DEFB 12,1,112
DEFW INTRO_TEXTOS+406           ;NAME...
DEFB 13,1,57
DEFW INTRO_TEXTOS+437           ;MALFARIO...
DEFB 15,1,15
DEFW INTRO_TEXTOS+468          ;TYPE YOUR
DEFB 16,1,112
DEFW INTRO_TEXTOS+482           ;OR TYPE...
DEFB 20,24,56
DEFW INTRO_TEXTOS+505           ;H=COPY

COLOREA_VADERETRO:
DEFB 6
DEFB 1,8,6,1,69
DEFB 1,18,5,1,69
DEFB 1,23,1,1,68
DEFB 2,8,6,1,69
DEFB 2,18,5,1,69
DEFB 2,23,1,1,68

COLOREA_INTERFEIS:
DEFB 7
DEFB 0,0,32,24,3
DEFB 7,1,30,16,0
DEFB 4,8,16,2,0
DEFB 0,7,1,1,66
DEFB 0,24,1,1,66
DEFB 2,4,3,3,0
DEFB 2,25,3,3,0

COLOREA_SECRETOS:
DEFB 3
DEFB 10,1,11,2,3
DEFB 12,1,11,2,3
DEFB 7,19,7,10,7

LOGO_MODERNA:
DEFB 3
DEFB 7,14,255
DEFW LA_MODERNA1
DEFB 8,9,255
DEFW LA_MODERNA2
DEFB 12,11,255
DEFW LA_MODERNA3


MODERNA_SOFT_MENU:
DEFB 6,3, 8,0,0,0,0,0,20,0,0,0,0,0,16,0,14,1,200,0,16,0,17,2,30,255,17,128,12,3,8,0,50,128,66,100,16,248,82,128,130,148,16,0,79,160,124,100,17,224,48,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,24,2,0,0,0,7,16,4,0,0,0,3,48,4,0,0,0,3,80,4,0,0,0,6,147,12,103,0,0,4,148,148,149,32,96,4,12,165,230,56,160,12,3,42,141,41,32,0,0,240,116,171,104,0,0,0,0,77,176,0,0,0,0,0,0,0,0,0,0,0,0
DEFB 67,67,70,70,6,6,67,67,67,67,67,67,67,67,67,3,3,3

CARTEL_MALFARIO:
;DEFB 8,3, 62,0,0,0,0,0,0,0,8,134,14,103,99,57,195,48,8,233,16,148,84,146,4,160,8,174,12,228,103,17,132,176,8,168,2,132,84,16,68,160,8,166,28,103,83,19,131,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,30,0,0,0,0,0,67,0,33,74,0,0,0,0,133,128,64,188,0,204,0,0,136,128,92,164,1,84,0,0,136,128,68,164,1,80,0,0,232,128,76,168,1,88,0,128,8,152,120,168,1,144,0,0,8,160,0,168,113,19,152,153,8,160,1,40,147,20,148,164,57,96,34,40,149,52,181,228,78,25,28,39,104,219,70,153,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
;DEFB 69,69,69,69,69,5,5,5,66,66,66,66,66,66,66,66,66,66,66,66,2,2,2,2


;-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/
;-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/-*/

; ESPRITES VARIOS

OPQAX:			;OP QA CON FLECHITAS
DEFB 2,2, 98,16,149,56,149,124,151,16,149,4,181,31,149,14,104,4,4,103,6,149,47,149,102,149,244,151,96,148,32,148,0,100,       66,2,4,68
CERRADURA2X2:		;ESO
DEFB 2,2, 255,255,170,85,255,255,188,61,248,31,176,13,240,15,176,13,240,15,188,61,252,63,216,27,120,30,47,244,31,248,3,192,   5,71,5,71
TTRY:			;2X1 T TRY
;DEFB 2,1, 255,0,255,0,24,0,24,245,24,151,24,242,24,162,24,146,   67,3
DEFB 2,1, 248,16,32,16,32,84,32,56,32,239,32,56,32,84,0,16,   68,2
EXITX:			;2X1 E EXIT
;DEFB 2,1, 113,252,66,2,68,1,112,33,64,98,64,252,112,96,0,32,     71,7
DEFB 2,1, 113,252,66,2,68,1,112,33,64,98,64,252,112,96,0,32,   68,2


MALFARIO_3X3:
DEFB 3,3, 2,192,96,7,0,16,14,0,8,26,0,4,50,0,4,50,30,30,55,63,63,63,243,179,127,243,243,112,191,254,226,131,164,226,161,164,228,160,100,112,128,4,48,35,244,56,1,228,30,4,196,15,0,12,7,224,56,7,255,240,5,95,240,6,170,224,10,170,96,31,255,224
DEFB 48,48,48,48,48,48,48,48,48
FMANAFER_3X3:
DEFB 3,3, 0,0,0,0,63,0,0,63,0,14,63,0,14,63,0,14,63,0,15,255,252,15,255,252,15,255,252,0,63,28,0,63,28,0,63,28,15,255,0,15,255,0,15,255,0,14,7,0,14,7,0,14,7,0,62,7,252,62,7,252,62,7,252,0,0,28,0,0,28,0,0,0
DEFB 48,48,48,48,48,48,48,48,48



; ESPRITES MENU PRINCIPAL

JB_2017:
DEFB 4,1, 251,128,0,0,34,64,0,0,34,64,119,92,35,128,21,68,34,64,117,76,162,64,69,68,162,64,69,68,75,144,119,68
DEFB 71,71,69,5

PULPO_QUI7:
DEFB 2,2, 0,0,1,248,3,252,2,236,18,76,35,252,33,248,48,224,63,240,29,188,135,214,255,255,113,179,3,153,15,24,24,12
DEFB 3,67,3,67

START:
DEFB 2,3, 7,224,24,24,39,228,95,250,88,26,176,13,167,253,160,29,176,13,191,141,176,13,88,26,95,250,39,228,24,24,7,224,0,0,0,0,56,112,16,80,215,103,149,82,71,2,197,2
DEFB 69,5,71,7,2,2

DEFB 2,3, 255,0,255,0,255,0,255,0, 255,0,255,0,255,0,255,0, 255,0,255,0,255,0,255,0, 255,0,255,0,255,0,255,0, 255,0,255,0,255,0,255,0, 255,0,255,0,255,0,255,0
DEFB 48,48,48,48,48,48

ADORNO_MENU:
DEFB 7,2, 61,252,0,0,0,0,60,66,86,4,0,12,4,66,141,3,144,66,18,0,149,135,17,64,5,18,16,139,131,2,192,2,12,56,149,159,0,99,224,0,16,137,78,10,166,252,4,1,66,60,17,111,95,0,7,60,16,10,171,235,224,30,128,16,5,101,125,127,253,0,24,2,168,174,175,234,0,13,25,76,85,85,84,0,10,162,134,10,191,232,0,71,84,129,193,255,112,0,225,171,0,106,171,128,0,64,252,0,31,252,0,0
DEFB 70,68,69,69,69,69,66,68,4,4,71,71,71,7


; ESPRITES INTRO POST CARGA

LA_MODERNA1:
DEFB  5,1, 0,240,0,0,0,0,144,0,0,0,123,144,0,0,56,78,48,0,0,104,70,32,0,0,216,213,32,0,1,144,147,32,112,1,48,155,33,220,59,32,   3,3,3,3,3
LA_MODERNA2:
DEFB  14,3, 0,0,0,0,31,191,99,38,102,96,0,0,0,0,0,0,0,0,113,163,98,114,216,199,128,0,0,0,0,0,0,0,195,34,66,211,189,156,192,0,0,0,3,192,0,1,159,34,114,147,105,51,103,128,0,0,6,96,28,3,57,98,210,247,123,39,44,224,0,0,12,48,244,2,99,66,19,15,51,160,104,112,0,0,9,145,132,6,66,67,241,249,136,239,211,16,0,0,9,145
DEFB  52,4,70,64,0,0,255,231,223,112,0,0,9,179,119,132,70,192,0,0,0,48,76,193,192,0,12,98,82,134,76,128,0,0,0,15,201,135,120,0,12,195,113,131,121,128,0,0,0,0,8,236,8,0,24,195,15,1,3,0,0,0,0,0,14,51,232,0,18,193,152,1,254,0,0,0,0,0,7,230,72,0,22,64,240,0,0,0,0,0,0,0,0,61,152,0,26,65,240,0
DEFB  0,0,0,0,0,0,0,3,48,0,3,99,48,0,0,0,0,0,0,0,0,2,119,240,1,102,96,0,0,3,192,28,32,0,0,3,156,24,1,60,192,0,0,4,32,18,252,0,0,1,249,232,0,243,128,1,255,3,0,36,32,0,0,0,59,46,3,134,0,0,0,0,192,240,64,127,192,0,11,226,4,124,0,0,63,14,78,32,64,0,0,0,13,158,4,232,0,0,0,16
DEFB  81,32,64,126,0,0,6,112,6,24,0,0,7,16,145,64,128,0,0,0,3,96,3,224,0,0,0,15,14,64,128,112,0,0,1,224
DEFB  3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
LA_MODERNA3:
DEFB  10,1, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,109,221,146,213,176,160,152,204,0,0,72,149,82,149,40,176,165,34,0,0,100,157,146,93,168,168,152,206,0,0,68,149,82,85,40,168,165,34,0,0,108,149,154,213,176,168,152,204,0,0,0,0,0,0,0,0,0,0,0,   0,70,70,70,70,70,70,70,70,0


; ESPRITES INTRO INICIO JUEGO
OVNI:
DEFB 1,3, 24,36,66,74,255,171,255,102,16,24,24,24,44,52,44,52,108,86,106,84,42,69,162,69,  97,100,100

PERSONAJILLO:
DEFB 1,1, 24,24,12,30,14,28,24,20, 71
DEFB 1,1, 24,88,126,26,120,72,206,2,71

TOBERA:
DEFB 2,2, 0,0,0,0,0,0,1,64,2,160,33,64,82,164,33,74,0,4,8,0,0,16,0,40,64,16,0,0,0,0,0,0,    66,2,2,2
DEFB 2,2, 0,0,0,0,0,0,1,0,2,148,17,42,0,20,4,42,10,20,4,0,0,0,10,0,21,32,10,0,0,0,0,0,   2,2,66,66

MASADA:
DEFB 4,4, 0,0,0,0,0,0,0,0,0,0,16,48,0,0,0,96,8,4,0,192,0,0,0,192,0,0,0,96,0,0,0,48,0,128,0,0,1,192,0,0,3,224,0,0,7,240,0,4,3,96,0,0,3,96,0,0,3,240,0,0,1,242,170,0,1,255,255,0,1,255,255,0,1,255,255,192,1,215,255,240,1,215,255,248,0,255,251,16,0,255,251,16,0,255,255,16,0,255,255,16,31,255,255,255,255,223,255,255,251,255,184,255,255,251,255,247,223,127,255,255,255,255,255,255,255,255,255,255
DEFB 14,14,14,15,8,8,8,14,8,48,48,8,8,8,8,8

GALAXIA:
DEFB 2,2, 15,128,61,240,107,104,220,28,176,10,226,132,199,226,162,179,231,96,192,113,112,177,41,98,63,192,26,130,7,4,0,40,  71,71,71,7
PLANETA:
DEFB 2,2, 0,0,0,0,3,128,207,224,223,240,31,240,47,248,51,248,60,120,63,136,29,112,30,176,15,96,3,128,0,0,0,0,  66,66,66,2
ESTRELLA:
DEFB 1,1, 0,0,16,16,100,16,16,0,  70

PTEMPORAL:
DEFB 1,1, 62,64,158,161,165,153,66,60, 6

NAVECHOQUE1:
DEFB 0,0,0,0,0,0,0,0,0,0,0,252,3,194,95,25,1,189,0,153,0,66,0,60,0,0,0,0,0,0,0,0
NAVECHOQUE2:
DEFB 0,0,0,0,0,0,0,0,0,0,63,0,67,192,152,250,189,128,153,0,66,0,60,0,0,0,0,0,0,0,0,0

FRED:
DEFB 2,3, 1,128,3,192,1,192,61,192,127,224,127,224,57,192,6,192,15,248,15,228,12,226,107,98,99,15,108,247,15,247,31,248,2,64,2,64,2,64,2,64,55,224,111,224,55,224,0,0
DEFB 6,6,6,6,6,6

FRED_FIAMBRE:
DEFB 3,2, 32,56,48,112,56,120,80,128,120,32,239,120,112,231,184,127,219,178,112,219,127,112,231,255,0,0,0,127,255,255,87,247,245,127,227,255,95,247,253,248,28,15,64,0,1,0,0,0
DEFB 6,6,6,7,7,7

CRUZ_MUERTE:
DEFB 1,1, 16,16,124,16,16,16,16,146,  66

ENTROPIA:
DEFB 145,66,0,1,128,0,66,137
DEFB 0,82,36,2,64,36,74,0
DEFB 0,0,36,24,24,36,0,0

BALON:
DEFB 0,0,64,136,18,4,192,202
DEFB 0,0,0,0,0,0,3,3

ANT_MUCHACHO:
DEFB 0,192,1,32,1,32,1,32,0,192,1,224,3,224,3,224,2,0,3,224,3,224,0,224,0,192,1,192,1,192,0,224
DEFB 0,192,1,32,1,32,1,32,0,192,3,240,7,248,13,236,8,4,25,228,1,224,3,96,15,32,8,32,12,56,0,48
ANT_MUCHACHA:
DEFB 0,192,1,32,1,32,3,32,0,192,3,224,3,64,3,224,2,224,7,224,7,240,2,168,0,192,1,192,1,192,0,224
DEFB 0,192,1,32,1,32,3,32,0,192,3,80,7,248,13,236,8,196,25,228,3,224,2,184,15,96,8,32,12,56,0,48
ANT_ARANA:
DEFB 0,0,30,0,63,32,103,160,223,252,255,194,255,224,127,254,56,218,33,87,34,93,4,72,4,76,0,64,0,0,0,0
DEFB 0,0,30,8,63,68,103,164,223,248,255,192,255,224,127,254,24,218,33,87,194,93,12,72,0,140,1,0,0,0,0,0
ANT_BLOQUE:
DEFB 1,0,4,64,17,16,68,68,145,16,68,66,169,12,84,54,170,220,85,118,170,220,85,118,42,216,21,96,2,128,0,0


ZX_SPECTRUM:
DEFB 3,2, 0,0,0,63,255,252,32,0,4,46,160,4,32,0,4,63,255,252,32,0,4,45,182,196,32,0,4,38,219,100,32,0,4,35,109,140,32,0,20,45,182,44,32,0,84,63,255,252
DEFB 69,69,69,69,69,5

CUMPLEANOS:
DEFB 5,3, 16,0,0,0,8,40,5,207,192,20,68,6,102,64,34,146,4,36,64,73,68,4,36,0,34,40,0,36,0,20,16,2,68,0,8,0,3,135,128,0,128,2,72,128,1,72,0,32,64,18,4,4,40,64,32,16,4,40,64,8,8,4,40,64,16,64,6,76,128,2,34,3,131,0,68,0,0,0,0,0,4,95,24,240,240,4,80,24,137,0,2,144,36,137,0,2,158,36,136,224
DEFB 1,16,36,240,16,1,16,126,144,16,1,16,66,136,16,1,31,66,133,224
DEFB 70,66,66,66,70,68,66,2,2,68,66,66,66,2,2

MALO_GORDO:
DEFB 4,4, 192,0,0,0,96,0,0,0,32,0,0,0,96,0,0,0,32,0,0,0,96,0,0,0,176,0,0,0,80,1,255,128,48,1,4,128,80,1,8,128,176,1,20,128,80,1,34,128,48,1,68,128,80,1,168,128,176,1,16,128,80,1,0,128,56,1,255,128,26,0,0,0,43,1,182,192,89,128,0,0,43,131,109,160,25,128,0,0,43,128,0,0,89,192,0,0,41,192,0,240
DEFB 25,193,253,236,45,239,254,250,20,247,255,109,13,123,255,181,20,189,251,21,44,85,86,0,28,40,172,0
DEFB 65,1,1,1,65,1,102,1,65,65,1,1,65,65,65,65

OJO_MISTERIOSO:
DEFB 1,1, 0,66,102,36,0,0,0,0,  66

DARK_MONK:
DEFB 3,3, 0,0,0,0,0,0,0,0,0,0,31,128,0,63,192,0,99,224,0,193,240,1,129,184,1,0,248,1,0,216,3,66,252,3,36,220,2,0,108,2,0,84,6,0,108,6,0,116,2,0,124,2,128,116,0,198,54,0,123,190,2,189,182,4,99,162,2,63,248,20,50,98
DEFB 1,1,1,1,0,1,1,1,1

OJOS_MONJE:
DEFB 1,1, 0,0,66,36,0,0,0,0,  6


;*********************** MARCHA FUNEBRE BEEP MANUAL ZX SPECTRUM

MARCHA_FUNEBRE:
LD IX,CACHO1
CALL PLAYCACHO
LD IX,CACHO1
CALL PLAYCACHO
LD IX,CACHO2
CALL PLAYCACHO
LD IX,CACHO2
CALL PLAYCACHO
LD IX,CACHO3
CALL PLAYCACHO
LD IX,CACHO3
CALL PLAYCACHO
LD IX,CACHO4
CALL PLAYCACHO
LD IX,CACHO4
CALL PLAYCACHO
RET

PLAYCACHO:
LD B,(IX+0)
INC IX
BCACHO:
PUSH BC
LD D,(IX+0)
LD E,(IX+1)
LD H,(IX+2)
LD L,(IX+3)
PUSH IX
;PUSH IY
CALL 949
;POP IY
POP IX
LD DE,4
ADD IX,DE
POP BC
DJNZ BCACHO
RET

CACHO1:
DEFB 5,  0,131,6,106, 0,147,5,179, 0,78,5,96, 0,73,5,179, 0,131,6,106
CACHO2:
DEFB 3,  0,156,5,96, 0,175,4,198, 1,136,4,61
CACHO3:
DEFB 7,  0,147,4,61, 0,52,3,255, 0,98,4,61, 0,87,4,198, 0,78,5,96, 0,73,5,179, 0,131,6,106
CACHO4:
DEFB 3,  0,131,6,106, 0,98,8,152, 1,6,6,106

CACHO5:
DEFB 3,	 0,26,6,106,  0,20,8,152, 0,26,12,248









INCLUDE INTRO.ASM




;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;**************************************************************************
;*******************   FIN MEMORIA EN CONTIENDA   **********************************
;**************************************************************************

FINCONTIENDA:

ORG 32768
LD SP,65535    ;PILA AL FINAL

CALL TODONEGRO	       ;COLOREAMOS SIN BORRAR TODO NEGRO
XOR A
OUT (254),A
LD (23624),A    ;BORDER NEGRO

;LD HL,FUENTE    ;ELEGIMOS FUENTE
;LD (FUENTEX),HL

LD A,68
LD (TINTA),A


JP INTRO




;PRUEBA DE EFECTOS

;JP FIN_KIULOOO

;KIULOOO:


;       LD BC, $EFFE         ; SEMIFILA 6 - 0
;       IN A, (C)            ; LEER PUERTO
;       BIT 0, A             ; COMPROBAR BIT
;       CALL Z, EFECTO0

;       LD BC, $EFFE         ; SEMIFILA 6 - 0
;       IN A, (C)            ; LEER PUERTO
;       BIT 4, A             ; COMPROBAR BIT
;       CALL Z, EFECTO6

;       LD BC, $EFFE         ; SEMIFILA 6 - 0
;       IN A, (C)            ; LEER PUERTO
;       BIT 3, A             ; COMPROBAR BIT
;       CALL Z, EFECTO7

;       LD BC, $EFFE         ; SEMIFILA 6 - 0
;       IN A, (C)            ; LEER PUERTO
;       BIT 2, A             ; COMPROBAR BIT
;       CALL Z, EFECTO8

;       LD BC, $F7FE         ; SEMIFILA 1 - 5
;       IN A, (C)            ; LEER PUERTO
;       BIT 0, A             ; COMPROBAR BIT
;       CALL Z, EFECTO1

;       LD BC, $F7FE         ; SEMIFILA 1 - 5
;       IN A, (C)            ; LEER PUERTO
;       BIT 1, A             ; COMPROBAR BIT
;       CALL Z, EFECTO2

;       LD BC, $F7FE         ; SEMIFILA 1 - 5
;       IN A, (C)            ; LEER PUERTO
;       BIT 2, A             ; COMPROBAR BIT
;       CALL Z, EFECTO3

;       LD BC, $F7FE         ; SEMIFILA 1 - 5
;       IN A, (C)            ; LEER PUERTO
;       BIT 3, A             ; COMPROBAR BIT
;       CALL Z, EFECTO4

;       LD BC, $F7FE         ; SEMIFILA 1 - 5
;       IN A, (C)            ; LEER PUERTO
;       BIT 4, A             ; COMPROBAR BIT
;       CALL Z, EFECTO5


;JP KIULOOO
;FIN_KIULOOO:





;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
; M E N U S   I N I C I O

MENUS_INICIO:

CALL TODONEGRO	       ;COLOREAMOS SIN BORRAR TODO NEGRO

LD IX,COLOREA_VADERETRO
CALL COLOREANDO_DE_TABLA

;DIBUJAMOS MENU

         LD A,69
         LD (FONDO),A
         CALL CELESEJUEGO       ;PARA QUE LAS BALAS FUNCIONEN Y SE VEAN DE COLOR AZUL

LD HL,ADORNO_MENU
CALL INVERSO
LD IX,DIBUJO_MENUPRINCIPAL
CALL PINTANDO_DE_TABLA

LD IX,ESCRIBIR_MENUPRINCIPAL
CALL ESCRIBIENDO_DE_TABLA     ;ESTA EN RUTINAS II EN PINTASTADOS Y TAL

LD HL,UNBLUS
CALL MUSICA1

JP NAVECITA                     ;VAMOS A NAVECITA





;MENU AYUDA   -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
MENU_AYUDA:

CALL CELESEJUEGO       ;PARA QUE LAS BALAS FUNCIONEN Y SE VEAN DE COLOR AZUL, USA VARIABLE "FONDO"

LD HL,ADORNO_MENU
CALL INVERSO
LD IX,DIBUJO_MENUAYUDA
CALL PINTANDO_DE_TABLA

LD IX,ESCRIBIR_MENUAYUDA
CALL ESCRIBIENDO_DE_TABLA     ;ESTA EN RUTINAS II EN PINTASTADOS Y TAL

LD HL,EXORCISTA
CALL MUSICA2
JP MENUS_INICIO


;MENU KKKKK   -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
MENU_KKKKK:

CALL TODONEGRO	       ;COLOREAMOS SIN BORRAR TODO NEGRO
CALL CELESEJUEGO       ;PARA QUE LAS BALAS FUNCIONEN Y SE VEAN DE COLOR AZUL, USA VARIABLE "FONDO"

LD HL,ADORNO_MENU
CALL INVERSO
LD IX,DIBUJO_MENUKKKKK
CALL PINTANDO_DE_TABLA

LD IX,ESCRIBIR_MENUKKKKK
CALL ESCRIBIENDO_DE_TABLA

LD HL,EXORCISTA
JP MUSICA3               ;OJO NO VAS CON CALL
JP MENUS_INICIO



;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=


INICIANDO_JUEGO_PRINCIPAL:


;VALORES INICIALES DEL JUEGO

LD HL,VALORES_INICIALES_PERSONAJES	;REINICIAMOS VALORES PERSONAJES Y VEHICULOS
LD DE,VALORES_PERSONAJES
LD BC,592
LDIR


;INICIANDO VIDA DE MALOTES...
LD HL,TABLA_ORDAS+5
LD DE,TABLA_INIC_ORDA
LD B,106					;ACTUALIZA CON Nº DE MALOTES !!!!!!!!!!!!!!!!!!!!!
VIDANDOLAS:
PUSH BC
	LD A,(DE)
	LD (HL),A
	INC DE
	LD BC,6
	ADD HL,BC
POP BC
DJNZ VIDANDOLAS

LD HL,ESTADOS				;PONEMOS A CERO DIVERSAS TABLAS
LD B,114        				;71+8+8+1+1+6+1+1+9+1+1+6
CALL TABLAACERO

LD A,12
LD (PANTALLA),A
LD A,4
LD (SALTO_PANTALLA),A
LD A,71
LD (FONDO),A


;--INICIAMOS CLAVE COLOR PANT 153 Y 93

LD DE,CLAVECOLOR

LD B,6
WUCLECOLOR:
PUSH BC

KUSKUS:
	LD BC,8
	CALL LIMITE	;A= 0 - 7     OJO USA BC HL A
	CP 2
	JR C,KUSKUS

	LD (DE),A
	INC DE

POP BC
DJNZ WUCLECOLOR


;--INICIAMOS ALGUNOS VALORES DEL TORNO INTERCAMBIADOR PANTALLA 7
LD A,3
LD (ETORNO+2),A
LD A,7
LD (ETORNO+5),A



;DAMOS CIERTOS VALORES A COCHE DESIERTO
LD A,60
LD (COORD_DESERT+6),A
LD (COORD_DESERT+7),A
LD A,243
LD (COORD_DESERT+8),A



;----- pruebas

;LD A,12
;LD (INVENTARIO1+0),A
;LD A,1
;LD(ESTADOS+17),A
;LD(ESTADOS+33),A
;LD(ESTADOS+34),A
;LD A,18
     ;12
;LD (PANTALLA),A
;LD A,4
;LD (SALTO_PANTALLA),A


;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;COLOREANDO INTERFEIS

LD IX,COLOREA_INTERFEIS
CALL COLOREANDO_DE_TABLA
LD IX,COLOREA_VADERETRO
CALL COLOREANDO_DE_TABLA



;PINTAMOS VIDAS PERSONAJES COMPLETAS
LD A,71
LD (TINTA),A
LD A,2		                        ;Nº VIDAS INICIALES
LD BC,6					;0,6
CALL UNNUMERO
LD A,2		                        ;Nº VIDAS INICIALES
LD BC,25				;0,25
CALL UNNUMERO

CALL PINTAVIDA_FMANAGER
CALL PINTAVIDA_MALFARIO

LD IX,DIBUJO_CARAS_INICIO               ;PINTAMOS AMBAS CARAS
CALL PINTANDO_DE_TABLA

;CAJA TEXTO

CALL BORRA_CAJA



;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

CARGAPANTALLA:

;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-********* TABLAS Y VARIABLES A CERO EN CADA CARGAPANTALLA

LD HL,VEHICULO
LD B,248       	;8+22+85+61+72
CALL TABLAACERO

LD HL,ORDA_MALOTES
LD B,63       	;33+30
CALL TABLAACERO

;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-********* PINTAMOS MAPA

CALL CELESEJUEGO


   ;ESPECIAL ENTRADA EN DESIERTO:

	LD A,(PANTALLA)		;SI PANTALLA=255 ES QUE ACABAMOS DE ENTRAR EN DESIERTO
	CP 255
	JR NZ,FIN_ENTRADA_DESIERTO
				
		LD A,1
		LD (DESIERTO1),A			;ACTIVAMOS MALFARIO EN DESIERTO
		LD A,60
		LD (COORD_DESERT+0),A
		LD (COORD_DESERT+1),A
		LD BC,0
		LD A,1
		JP ASIGNANDO_PANTALLAS_DESIERTO		;DE AQUI VOLVERA A CARGAPANTALLA (CONSIGO COHERENCIA Nº PANTALLA)
	
    FIN_ENTRADA_DESIERTO:


   ;ESPECIAL PINTAR DESIERTO

		LD IX,VALORES_PERSONAJES
		CALL OASIS			;SALE A=0 1 3		0-NO ES DESIERTO	1--3 SI LO ES, MALFARIO -  COCHE DESIERTO
		CP 0
		JP Z,NO_ES_DESIERTO
		CP 1
                JR Z,SI_DESIERTO1
		JR SI_DESIERTO3			;COCHE DESIERTO SIEMPRE LO ESTÁ

			SI_DESIERTO1:
			LD IX,COORD_DESERT+0
			JR PINTADESIERTO

			SI_DESIERTO3:
			LD IX,COORD_DESERT+6

		PINTADESIERTO:
		;ENTRADA IX -> VALORES PY PX PANTALLA DESIERTO

			

		LD D,(IX+0)				;DIRECCION ROM:  (Y-1)*120 + X
		DEC D
		LD E,120
		CALL Multiply                        	; this routine performs the operation HL=D*E  HL DIRECCION DE LA ROM
		LD B,0
		LD C,(IX+1)
		ADD HL,BC
		LD A,(HL)				;SACAMOS Nº 8 BITS
		AND 15					;REDUCIMOS DE 0 A 15
		LD DE,BUFFER_DESIERTO
		LD HL,0
		CALL TRUCO_CONTADOR_FRASESII		;HL=VALOR A SUMAR A DESIERTO_MAP PARA IR A PRIMER VALOR
		LD DE,DESIERTO_MAP
		ADD HL,DE
		CALL PINTAPANTALLA


			;ADEMÁS PINTAMOS BORDES
			LD A,(COORD_DESERT+0)		;Y
			CP 1
			JR Z,BORDEABAJO
			CP 120			
			JR Z,BORDEARRIBA
			JR BORDEALOSLAOS
			BORDEABAJO:
			LD BC,3585
			JR MEKATXIS
			BORDEARRIBA
			LD BC,1793
				MEKATXIS:
				LD DE,3841
				LD A,255
				LD HL,VACIO2X2+532
				CALL RELLENA2D

			BORDEALOSLAOS:
			LD A,(COORD_DESERT+1)		;X
			CP 1
			JR Z,BORDEIZQUIERDA
			CP 120			
			JR Z,BORDEDERECHA
			JR NOBORDE
			BORDEIZQUIERDA:
			LD BC,1793
			JR MEKATXIS2
			BORDEDERECHA
			LD BC,1821
				MEKATXIS2:
				LD DE,264
				LD A,255
				LD HL,VACIO2X2+532
				CALL RELLENA2D
			NOBORDE:
	

			;ADEMÁS COMPROBAMOS SI ESTAMOS EN 60,60 o 80,85 Y PINTAMOS Y CARGAMOS COSAS...
			ESTAMOS_EN_60x60:
			LD A,(COORD_DESERT+0)
			CP 60
			JR NZ,ESTAMOS_EN_80x85
			LD A,(COORD_DESERT+1)
			CP 60
			JR NZ,ESTAMOS_EN_80x85

				LD HL,DESIERTO_60x60		;UN PINTAPANTALLA
				CALL PINTAPANTALLA

				LD HL,EVENTOS_DESIERTO+0	;DOS EVENTOS
				LD DE,EVENTOS
				LD BC,24
				LDIR

				LD HL,PINTAESTADOS_DESIERTO	;UN PINTAESTADO
				LD DE,ESTADILLO
				LD BC,5
				LDIR

                                JR FIN_PINTAR_MAPA

			ESTAMOS_EN_80x85:
			LD A,(COORD_DESERT+0)
			CP 70           ;80
			JR NZ,FIN_PINTAR_MAPA
			LD A,(COORD_DESERT+1)
			CP 75           ;85
			JR NZ,FIN_PINTAR_MAPA

				LD HL,DESIERTO_80x85		;UN PINTAPANTALLA
				CALL PINTAPANTALLA

				LD HL,EVENTOS_DESIERTO+24	;UN EVENTO
				LD DE,EVENTOS
				LD BC,12
				LDIR

                                LD IX,ANIMACIOM_DESIERTO
                                LD DE,FONDITO
                                CALL CARGANDO_EN_DESIERTO

				;CARGAMOS DOS MALOTES

                                JR FIN_PINTAR_MAPA


NO_ES_DESIERTO:



CALL NILAMANTAPORCALOR		;HL=PRIMER VALOR DE LA PANTALLA A PINTAR
LD DE,MAPAX
ADD HL,DE
CALL PINTAPANTALLA


FIN_PINTAR_MAPA:
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-********* CARGAMOS TABLAS DIVERSAS

CALL CARGAFONDITO		;CARGAMOS FONDITO CON VALORES DE SPRITES ANIMADOS

CALL CARGAEVENTOS               ;CARGAMOS EVENTOS CON VALORES DE EVENTOS POSIBLES EN PANTALLA

CALL CARGASTADOS                ;CARGAMOS ESTADILLO CON VALORES PINTASTADOS POSIBLES EN PANTALLA

CALL CARGAMETEORO               ;CARGAMOS METEORO CON VALORES DISPAROS CARACTER POSIBLES EN PANTALLA

CALL CARGA_ORDA_MALOTES         ;CARGAMOS ORDA MALOTES POSIBLES EN PANTALLA, ESTA EN RUTINAS I, EN RUTINAS MOVIMIENTO MALOS


;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-********* PINTAMOS FONDO ANIMADO EN CASO QUE FRAME=1

LD IX,FONDITO
LD A,(IX+4)
CP 1
CALL Z,PINTAFONDO_ANIMADO
LD A,(IX+15)
CP 1
CALL Z,PINTAFONDO_ANIMADO

;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-********* PINTAMOS PINTASTADOS & PANTALLA 18

CALL PINTASTADO

LD A,(PANTALLA)
CP 18
CALL Z,PINTA18

;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-********* PINTAMOS TORNO INTERCAMBIADOR SI ESTAMOS EN P7
LD A,(PANTALLA)
CP 7
CALL Z,PINTA7

;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-********* PINTAMOS DIAMANTES SI ESTAMOS EN P153

LD A,(PANTALLA)
CP 153
CALL Z,PINTA153

;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-********* PINTAMOS DIVERSOS PERSONAJES Y VEHICULOS SI ESTÁN EN LA PANTALLA

;MALFARIO - FMANAGER SE PINTAN SÓLO SI ESTAN Y ESTAN ANDANDO Y NO SON EL ACTIVO (EL ACTIVO YA SE PINTA EL PRIMERO, LUEGO EN SU COLUMNA NO HACE FALTA Y ADEMAS DATOS OBSOLETOS EN SU COLUMNA)
;RESTO SE PINTAN SOLO SI ESTAN Y NO SON EL ACTIVO (EL ACTIVO YA SE PINTA EL PRIMERO, LUEGO EN SU COLUMNA NO HACE FALTA Y ADEMAS DATOS OBSOLETOS EN SU COLUMNA)
;SI ES EL ACTIVO LO PINTO SIEMPRE 

PUSH IY
LD IY,VEHICULO
LD IX,VALORES_PERSONAJES+0	;INICIO EN ACTIVO
LD A,(IX+13)
LD (JOKER4),A			;CON ESTO EL ACTIVO SE PINTA COLOR FONDO AVANCE

LD B,16          ;15
BUKLEDE15:
PUSH BC

LD A,B
CP 16               ;15
JR Z, MININIAHUELEAJAZMIN	;SI ES EL PRIMERO, ES EL ACTIVO QUE SE PINTA SIEMPRE

	LD A,(PANTALLA)			;PANTALLA		
	CP (IX+2)			;PANTALLA PERSONAJE
	JR NZ,OTRORA			;NO COINCIDE PANTALLA PASAMOS AL SIGUIENTE

	LD A,(VALORES_PERSONAJES+5)	;QUIEN ES EL ACTIVO	
	CP (IX+5)			;DE QUIEN ESTAMOS TRATANDO
	JR Z,OTRORA			;SI COINCIDE PASAMOS AL SIGUIENTE PQ DATOS ESTAN OBSOLETOS, LOS BUENOS SON LOS DEL ACTIVO

	LD A,(IX+7)			;"DONDE ESTOY", VEHICULOS SIEMPRE 0, Y PERSONAS 0 SÓLO CUANDO ANDAN , ASI QUE DEBE VALER 0 PARA PINTAR
	CP 0
	JR NZ,OTRORA			;NO COINCIDE PANTALLA PASAMOS AL SIGUIENTE
	
	LD A,(IX+5)			;QUIEN SOY, ELEGIMOS COLOR DE LOS NO ACTIVOS
	CP 7				;BARCO
	JR NZ,DEQUECOLORVAS
	LD A,15				;EL BARCO SI NO ESTA ACTIVO SE PINTA AZUL - BLANCO SIN BRILLO, EL ACTIVO QUE SE PINTA CON FONDO AVANCE
	LD (JOKER4),A			;EXCEPTO EL ACTIVO QUE SE PINTA CON FONDO AVANCE
	JR MININIAHUELEAJAZMIN
	DEQUECOLORVAS:
	LD A,7				;SI NO ES BARCO SE COLOREA 7
	LD (JOKER4),A			;EL ACTIVO QUE SE PINTA CON FONDO AVANCE

	MININIAHUELEAJAZMIN:
	LD A,(IX+5)			;PERSONA O VEHICULO
	CP 2
	JR C,PINTAMOSLO_PERSONA
	
    PINTAMOSLO_VEHICULO:
	CALL GENERAMOS_ESPRITES		
	CALL ELESPRITEXSENTIDO		;ENTRADA IX COLOCADO EN PERSONAJE   SALE HL CON ESPRITE CORRECTO SEGUN SENTIDO (RUTINAS I)
	LD B,(IX+0)			;DOY YX  &  CARGO VEHICULO
	LD (IY+0),B
	LD C,(IX+1)
	LD (IY+1),C
	LD A,(IX+5)
	LD (IY+2),A
	LD A,(IX+8)
	LD (IY+3),A
	LD A,(JOKER4)				;COLOR
	CALL HR2X2B
	LD DE,4
	ADD IY,DE
	JR OTRORA
	
     PINTAMOSLO_PERSONA:

	LD B,(IX+0)
	LD C,(IX+1)
	LD H,(IX+20)
	LD L,(IX+19)
	LD A,(JOKER4)				;COLOR
	CALL HR1X1B

OTRORA:
LD DE,37
ADD IX,DE

POP BC
DJNZ BUKLEDE15
POP IY

LD A,(VALORES_PERSONAJES+5)	;QUIEN ES EL ACTIVO	
CP 2
JR C,AQQQUI
LD IX,VALORES_PERSONAJES+0	;VOLVEMOS A PONER POR SI ACTIVO LO NECESITA Y LO HEMOS MACHACADO
CALL GENERAMOS_ESPRITES 
AQQQUI:

;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*********   FRASE INICIAL AL PRINCIPIO DEL JUEGO
LD A,(VALORES_PERSONAJES+5)	;QUIEN ES EL ACTIVO
CP 0
JR Z,EMPEZANDO_MALFA
CP 1
JR Z,EMPEZANDO_FM
JR NASTIDEPLASTI

                EMPEZANDO_MALFA:
                LD A,(INAUGURA1)
                CP 0
                JR NZ,NASTIDEPLASTI

                INC A
                LD (INAUGURA1),A
                JR DILAFRASECITA

                EMPEZANDO_FM:
                LD A,(INAUGURA2)
                CP 0
                JR NZ,NASTIDEPLASTI

                INC A
                LD (INAUGURA2),A
                
                   DILAFRASECITA:
                   
                        LD A,12		;"DONDE ESTOY?"
             		CALL UNAFRASEB
	       		CALL KOLORKAJA

                        CALL ESPERATECLA

                        LD A,13		;"LA NAVE ESTA ROTA"
             		CALL UNAFRASEB
	       		CALL KOLORKAJA


NASTIDEPLASTI:
;=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-*********


JP BUCLE_PRINCIPAL

;**************************************************************************
;*******************   BUCLE PRINCIPAL   **********************************
;**************************************************************************



INCLUDE BUCLE.ASM
INCLUDE RUTINAS_I.ASM
INCLUDE RUTINAS_II.ASM
INCLUDE ESCRIBIR.ASM
INCLUDE RUTINAS_GRAFICAS.ASM
INCLUDE MAPAX.ASM
INCLUDE DATOX.ASM
INCLUDE ESPRITES.ASM
INCLUDE SONIDOS.ASM
INCLUDE EFECTOS.ASM


END 32768